{"mappings":"kpBAsBA,IAAuBA,EACDC,mFArBtB,IAAIC,EAAU,GAoBdF,WAlBkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,KAelCL,WAXiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,MCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,iLC8CzD,IAAoBC,+CA5CpB,IAAIC,EAAY,YA6BPC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAO,wCAA0C,MAAQ,IAc7EJ,WA1C4BP,GAC1B,IAAIY,EAAQJ,EAAUR,GAOtB,OALKY,IACHA,aAQF,IACE,MAAM,IAAIV,MACV,MAAOW,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAK,kCAEpC,GAAIF,EAGF,OAAOL,EAAWK,EAAQ,IAI9B,MAAO,IApBGG,GACRT,EAAUR,GAAMY,GAGXA,MCZQT,EAAA,SAAAe,aAA6C,SAAWf,EAAA,SAAAgB,QAA6C,eCAtHC,EAAiBjB,EAAA,SAAAe,aAA6C,SAAWf,EAAA,SAAAgB,QAA6C,SCUtHE,QAAQC,IAAIC,EAAAH,IAEZ,MAAMI,EAAkBC,SAASC,cAAc,YAmChBC,sBA/BT,SAASC,GAE7B,MAAMC,EAAM,sEAYbN,EAAAH,2DAWGU,UAAA,KAGoBC,mBAAA,aAAAF,GAO+CG,CAAhCR,GAGnC,MAAES,QAAAC,MAAA,6EACFC,QAAgBF,EAAAG,OAIoB,IAAwEH,EAAAI,GAAA,MAAA,IAAAnC,MAAA,GAAAiC,EAAAG,YAAAL,EAAAM,WAI3ClB,QAA3DC,IAAIa,OAIRK,OAASA,GAASL,EAAAA,OAElB,CACAnC,GAAAwC,EAAWxC,GACXyC,MAAAD,EAAaC,MACdC,UAAAF,EAAAE,UAEDC,UAAYH,EAAMI,WAEGC,MAAAL,EAAAM,UACbC,SAAAP,EAAAO,SACRC,YAAgBR,EAAAS,aAuENC,YAAQV,EAAAU,aAsClB7B,QAAuDC,IAAAkB,GAIvD,MAAAX,EAAA,gFAQDN,EAAAH","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-7bdb3503a4219896.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-0b5c014b43ff02b3.js","node_modules/@parcel/runtime-js/lib/runtime-fe6bcbdb9ebe06be.js","src/js/controller.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2G0cO\\\":\\\"index.0aaf3764.js\\\",\\\"cvv7P\\\":\\\"icons.9801e6f1.svg\\\",\\\"7V4A1\\\":\\\"icons.9801e6f1.svg\\\"}\"));","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('2G0cO') + require('./helpers/bundle-manifest').resolve(\"cvv7P\");","module.exports = require('./helpers/bundle-url').getBundleURL('2G0cO') + require('./helpers/bundle-manifest').resolve(\"7V4A1\");","// const timeout = function (s) {\n//   return new Promise(function (_, reject) {\n//     setTimeout(function () {\n//       reject(new Error(`Request took too long! Timeout after ${s} second`));\n//     }, s * 1000);\n//   });\n// };\n\nimport  icons from '../img/icons.svg';  // Parcel 1\nimport  icons from 'url:../img/icons.svg';  // Parcel 2\nconsole.log(icons);\n\nconst recipeContainer = document.querySelector('.recipe')\n\n\n// Step 5 - 5.1\nconst renderSpinner = function(parentEl) {\n\n  const markup = `\n    <div class=\"spinner\">\n        <svg>\n            <use href=\"${icons}#icon-loader\"></use>\n        </svg>\n    </div>\n  `\n\n  parentEl.innerHTML = ''\n\n  parentEl.insertAdjacentHTML('afterbegin', markup)\n\n}\n\n\n\n\nconst showRecipe = async function() {\n\n\n  try {\n\n    // 5.1\n    renderSpinner(recipeContainer)\n\n\n    // 1) loading recipe\n    const res = await fetch('https://forkify-api.herokuapp.com/api/v2/recipes/5ed6604591c37cdc054bcc5b')\n\n    const data = await res.json()\n\n    // Step 7 - если неправильный id, то в свойстве объекта res в ok - будет false и в ошибку мы вставляем message из полученной даты\n    // эта ошибка попадает в блок catch, которая выдает алерт с прописанной тут нотификацией\n    if(!res.ok) throw new Error(`${data.message} (${res.status})`)\n\n    // console.log(res);\n    //\n    console.log(data);\n\n    // Step 8\n    // сохраняем из полученных данных сам рецепт\n    // так как это объект, то можно сразу деструктурировать полученный рецепт не просто в переменную, а в объект\n    let {recipe} = data.data\n\n    //так как recipe у нас переменная, то переназначим ее в объект c понятными нам свойствами\n    recipe = {\n      id: recipe.id,\n      title: recipe.title,\n      publisher: recipe.publisher,\n      sourceUrl: recipe.source_url,\n      image: recipe.image_url,\n      servings: recipe.servings,\n      cookingTime: recipe.cooking_time,\n      ingredients: recipe.ingredients\n    }\n\n    console.log(recipe);\n\n  //  2) rendering recipe\n  //  Step 1\n    const markup = `\n            <div class=\"spinner\">\n          <svg>\n            <use href=\"${icons}#icon-loader\"></use>\n          </svg>\n        </div>\n\n        <div class=\"error\">\n            <div>\n              <svg>\n                <use href=\"${icons}#icon-alert-triangle\"></use>\n              </svg>\n            </div>\n            <p>No recipes found for your query. Please try again!</p>\n          </div>\n\n       \n        <figure class=\"recipe__fig\">\n          <img src=\"${recipe.image}\" alt=\"Tomato\" class=\"recipe__img\" />\n          <h1 class=\"recipe__title\">\n            <span>${recipe.title}</span>\n          </h1>\n        </figure>\n\n        <div class=\"recipe__details\">\n          <div class=\"recipe__info\">\n            <svg class=\"recipe__info-icon\">\n              <use href=\"${icons}#icon-clock\"></use>\n            </svg>\n            <span class=\"recipe__info-data recipe__info-data--minutes\">${recipe.cookingTime}</span>\n            <span class=\"recipe__info-text\">minutes</span>\n          </div>\n          <div class=\"recipe__info\">\n            <svg class=\"recipe__info-icon\">\n              <use href=\"${icons}#icon-users\"></use>\n            </svg>\n            <span class=\"recipe__info-data recipe__info-data--people\">${recipe.servings}</span>\n            <span class=\"recipe__info-text\">servings</span>\n\n            <div class=\"recipe__info-buttons\">\n              <button class=\"btn--tiny btn--increase-servings\">\n                <svg>\n                  <use href=\"${icons}#icon-minus-circle\"></use>\n                </svg>\n              </button>\n              <button class=\"btn--tiny btn--increase-servings\">\n                <svg>\n                  <use href=\"${icons}#icon-plus-circle\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"recipe__user-generated\">\n            <svg>\n              <use href=\"${icons}#icon-user\"></use>\n            </svg>\n          </div>\n          <button class=\"btn--round\">\n            <svg class=\"\">\n              <use href=\"${icons}#icon-bookmark-fill\"></use>\n            </svg>\n          </button>\n        </div>\n\n        <div class=\"recipe__ingredients\">\n          <h2 class=\"heading--2\">Recipe ingredients</h2>\n          <ul class=\"recipe__ingredient-list\">\n          \n<!-- Step 2 -->\n            ${recipe.ingredients.map(ing => {\n              return `\n               <li class=\"recipe__ingredient\">\n              <svg class=\"recipe__icon\">\n                <use href=\"${icons}#icon-check\"></use>\n              </svg>\n              <div class=\"recipe__quantity\">${ing.quantity}</div>\n              <div class=\"recipe__description\">\n                <span class=\"recipe__unit\">${ing.unit}</span>\n                ${ing.description}\n              </div>\n            </li>\n              \n              `\n             }).join('')}\n\n          </ul>\n        </div>\n\n        <div class=\"recipe__directions\">\n          <h2 class=\"heading--2\">How to cook it</h2>\n          <p class=\"recipe__directions-text\">\n            This recipe was carefully designed and tested by\n            <span class=\"recipe__publisher\">${recipe.publisher}</span>. Please check out\n            directions at their website.\n          </p>\n          <a\n            class=\"btn--small recipe__btn\"\n            href=\"${recipe.sourceUrl}\"\n            target=\"_blank\"\n          >\n            <span>Directions</span>\n            <svg class=\"search__icon\">\n              <use href=\"src/img/icons.svg#icon-arrow-right\"></use>\n            </svg>\n          </a>\n        </div>\n    `\n\n    // очищаем HTML перед тем как вставлять нашу компоненту\n    recipeContainer.innerHTML = ''\n\n    // вставляем разметку\n    recipeContainer.insertAdjacentHTML('afterbegin', markup)\n\n\n\n  } catch (err) {\n\n    alert(err)\n\n  }\n\n}\n\n\nshowRecipe()"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","value","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","getBundleURL","resolve","$cd0009e9fb5f7590$exports","console","log","$parcel$interopDefault","$e59237c46c570137$var$recipeContainer","document","querySelector","async","parentEl","markup","innerHTML","insertAdjacentHTML","$e59237c46c570137$var$renderSpinner","res","fetch","data","json","ok","message","status","recipe","title","publisher","sourceUrl","source_url","image","image_url","servings","cookingTime","cooking_time","ingredients"],"version":3,"file":"index.0aaf3764.js.map"}